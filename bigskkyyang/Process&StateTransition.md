# 💻 프로세스(Process) 개념 및 상태 전이 (State Transition)

## 📌 1. 프로세스란?

- 프로세스(process)란 실행중에 있는 프로그램(Program)을 의미한다.
- 스케줄링의 대상이 되는 작업(task)과 같은 의미로 쓰인다.
- 프로세스 내부에는 최소 하나의 스레드(thread)를 가지고 있는데, 실제로는 스레드(thread)단위로 스케줄링을 한다.
- 하드디스크에 있는 프로그램을 실행하면, 실행을 위해서 메모리 할당이 이루어지고, 할당된 메모리 공간으로 바이너리 코드가 올라오게 된다. 이 순간부터 프로세스라 불린다.

* **프로그램(Program)**: 보조 기억 장치(하드디스크, SSD 등)에 저장되어 있는 **정적인 파일**이다. 즉, 아직 실행되지 않은 명령어와 데이터의 묶음이다. 우리가 사용하는 응용 프로그램들(웹 브라우저, 게임, 문서 편집기)이 모두 프로그램에 해당한다.

* **프로세스(Process)**: **실행을 위해 메모리에 올라와 있는 프로그램**이다. 프로그램이 운영체제에 의해 메모리를 할당받고, CPU를 통해 실제로 실행되고 있는 동적인 상태를 의미한다. 컴퓨터의 '작업 관리자'를 열어보면 수많은 프로세스가 실행되고 있는 것을 확인할 수 있다.

## 📌 2. 프로세스의 메모리 구조

프로세스는 단순히 코드로만 이루어진 것이 아니라, 실행을 위한 다양한 정보들을 담고 있다. 프로세스 하나당 하나씩 존재한다.

1.  **코드(Code) 영역**: 실행할 프로그램의 코드(명령어)가 들어있는 영역
2.  **데이터(Data) 영역**: 프로그램이 사용하는 전역 변수나 정적(static) 변수들이 저장되는 곳
3.  **스택(Stack) 영역**: 함수 호출 시 매개변수, 지역 변수, 반환 주소와 같은 임시 데이터가 저장되는 공간
4.  **힙(Heap) 영역**: 프로그램 실행 중 동적으로 할당되는 데이터가 저장되는 공간

## 📌 3. 프로세스 제어 블록 (PCB, Process Control Block)

운영체제가 프로세스를 관리하기 위해 필요한 **모든 정보**를 담고 있는 특별한 데이터 구조

* **프로세스 상태**: 현재 프로세스가 **실행(running), 준비(ready), 대기(waiting)** 등 어떤 상태에 있는지 나타낸다.
* **프로세스 ID (PID)**: 각 프로세스를 식별하기 위한 고유 번호
* **프로그램 카운터**: 다음에 실행할 명령어의 주소
* **레지스터 정보**: CPU의 레지스터에 저장되어 있던 값들을 보관
* **메모리 관리 정보**: 프로세스에 할당된 메모리 영역에 대한 정보
* **입출력 상태 정보**: 프로세스에 할당된 파일, 장치 등의 정보

운영체제는 PCB를 통해 여러 프로세스를 효율적으로 관리하고, CPU를 할당하는 등의 중요한 결정을 내린다.

## 📌 4. 프로세스의 5가지 상태(State)와 상태 전이 (State Transition)

프로세스는 생성되어 종료될 때까지 여러 상태를 거칩니다. 이 상태들이 변화하는 과정을 **상태 전이(State Transition)**라고 부른다.

1.  **생성 (New)**: 프로세스가 만들어지는 초기 단계. 아직 메모리에 완전히 올라가지 않은 상태이며, 운영체제에게 필요한 자원을 요청하고 받는 단계.
2.  **준비 (Ready)**: CPU를 할당받기 위해 **준비 큐(Ready Queue)**에서 대기하고 있는 상태. 실행될 준비는 모두 끝났지만, 현재 CPU를 사용할 수 있는 다른 프로세스가 있기 때문에 기다리고 있다.
3.  **실행 (Running)**: CPU를 할당받아 명령어를 실행하고 있는 상태. 이 상태에 있을 때만 실제로 코드가 돌아가고 작업을 처리하게 된다.
4.  **대기 (Waiting)**: 특정 이벤트(예: 파일 입출력, 네트워크 통신)가 완료되기를 기다리는 상태. 프로세스 스스로는 할 일이 없어서 CPU를 반납하고 잠시 쉬고 있음. **'블록(Block)'** 상태라고도 한다.
5.  **종료 (Terminated)**: 프로세스의 실행이 모두 끝났거나, 강제 종료된 상태. 프로세스에 할당되었던 모든 자원(메모리 등)을 운영체제에 반납한다.

### **상태 전이 과정**

* **New -> Ready**: 운영체제가 프로세스를 생성하고, 실행을 위해 **준비 큐**에 넣어준다.
* **Ready -> Running**: 운영체제의 **CPU 스케줄러**가 준비 상태에 있는 프로세스 중 하나를 선택하여 **CPU를 할당**해 준다.
* **Running -> Waiting**: 실행 중이던 프로세스가 외부적인 작업(파일 읽기, 사용자 입력 등)을 요청하면, 해당 작업이 끝날 때까지 CPU를 반납하고 대기 상태로 들어간다. **CPU는 유휴 상태가 되지 않고, 다른 준비 상태의 프로세스에게 할당된다.**
* **Waiting -> Ready**: 대기 상태에서 기다리던 **외부 작업이 완료**되면, 다시 실행할 준비가 되었으므로 준비 상태로 돌아간다.
* **Running -> Ready**: 여러 프로세스가 동시에 실행되는 것처럼 보이게 하기 위해 운영체제는 각 프로세스에 아주 짧은 시간(밀리초 단위) 동안만 CPU를 사용하게 한다. 이 할당된 시간이 끝나면(**타임아웃**), 프로세스는 강제로 **준비 상태**로 돌아간다. 또한, 더 높은 우선순위의 프로세스가 나타나면 CPU를 빼앗기기도 한다(**선점**).
* **Running -> Terminated**: 프로세스의 작업이 **모두 완료**되거나, **강제로 종료**되면 종료 상태로 넘어간다.

---
