# 명령어 사이클(Instruction Cycle)

CPU는 프로그램 명령어를 클럭에 따라 일정한 주기를 반복하여 실행하는데, 이 주기를 **명령어 사이클(Instruction Cycle)**이라고 한다.

CPU가 하나의 명령어를 실행하는 데 필요한 전체 처리 과정으로서, CPU가 프로그램을 실행한 순간부터 전원을 끄거나 오류가 발생하여 프로그램이 중단될 때까지 반복된다.

명령어 사이클은 주 기억 장치로부터 명령어를 읽어오는 단계인 **인출 사이클(Fetch Cycle)** 과 명령어를 실행하는 단계인 **실행 사이클(Execution Cycle)**로 분리된다.

---

## 인출 사이클(Fetch Cycle)

첫 번째 주기 t0에서는 프로그램 카운터(PC)에 저장된 명령어 주소를 CPU 내부 버스를 통해 메모리 주소 레지스터(MAR)로 보낸다.

두 번째 주기 t1에서는 MAR가 지정하는 기억장치 주소로부터 명령어를 읽어서 데이터 버스를 통해 메모리 버퍼 레지스터(MBR)에 저장함. `프로그램 카운터 += 1`

세 번째 주기 t2에서는 MBR에 저장된 명령어를 명령어 레지스터(IR)에 저장함.

---

## 실행 사이클(Execution Cycle)

실행 사이클 동안에는 CPU가 명령어 코드를 해독(decode)하고, 그 결과에 따라 필요한 연산들을 수행. **데이터 이동, 데이터 처리, 데이터 저장, 프로그램 제어**의 연산이 있음

명령어는 **연산코드(Operation Code)**와 **오퍼랜드(operand)**로 구성된다. 실행 사이클에서 수행되는 마이크로 연산들은 명령어의 연산 코드에 의해 결정되며, 명령어 실행에 필요한 데이터가 저장된 주소는 오퍼랜드에 의해 결정됨

---

# 파이프라이닝 (Pipelining)

명령어를 순차적으로 실행하는 프로세서에 적용되는 기술. 한 번에 하나의 명령어만 실행하는 것이 아니라 하나의 명령어가 실행되는 도중에 다른 명령어를 실행하는 식으로 동시에 여러 개의 명령어를 실행하는 기법. 이렇게 **동시에 여러 개의 명령어를 처리함으로써 처리량을 올리는 것**이 파이프라이닝의 핵심.

---

## 가장 효율적인 파이프라이닝 조건

* 각 단계별 처리 시간이 일정해야 한다.
* 각 명령의 처리 단계는 균일해야 한다.

처리 시간이 일정하지 않고 단계가 균등하지 않아 문제가 발생하는데, 이를 **해저드(Hazard)**라고 함

---

## 해저드의 종류

1. 구조적 해저드 : 프로세서의 자원이 부족해서 발생
2. 데이터 해저드 : 이전 명령어의 결과를 기반으로 다음 명령이 수행될 때 파이프라인이 지연되는 경우 생기는 것
3. 제어 해저드 : 명령어의 실행 순서를 변경하는 분기 명령어들로 인해 다른 명령어들이 실행 중에 한 명령어의 결과 값에 기반을 둔 결정을 할 필요하 있을 때 일어남

---