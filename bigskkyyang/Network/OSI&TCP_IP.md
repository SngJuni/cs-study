# OSI 7계층 (Open Systems Interconnection Model)

## 개요

- **네트워크 통신 과정**을 7단계로 나눈 국제 표준 모델
- 데이터가 한 컴퓨터에서 다른 컴퓨터로 전송될 때, 각 계층이 특정 역할을 수행하면서 순차적으로 데이터를 처리한다. 
- 이 계층화 구조는 네트워크 설계, 문제 해결, 프로토콜 이해를 쉽게 해준다.

---

## OSI 7계층 구조

| 계층 번호 | 계층 이름 | 주요 기능 | 대표 프로토콜 / 장비 |
|:--:|:--|:--|:--|
| 7 | **응용 계층 (Application Layer)** | 사용자가 직접 이용하는 네트워크 서비스 제공 | HTTP, FTP, SMTP, DNS |
| 6 | **표현 계층 (Presentation Layer)** | 데이터의 **형식 변환**, **암호화/복호화**, **압축/해제** 수행 | JPEG, MPEG, SSL, TLS |
| 5 | **세션 계층 (Session Layer)** | 통신 세션의 **설정, 유지, 종료** 관리 | NetBIOS, RPC, SQL 세션 |
| 4 | **전송 계층 (Transport Layer)** | 데이터의 **신뢰성 보장**, **흐름 제어**, **에러 복구** | TCP, UDP |
| 3 | **네트워크 계층 (Network Layer)** | **경로 설정(Routing)**, **논리 주소(IP)** 관리 | IP, ICMP, ARP, RIP, OSPF / 라우터 |
| 2 | **데이터 링크 계층 (Data Link Layer)** | **MAC 주소** 기반의 프레임 전송, **오류 검출/재전송** | Ethernet, PPP, Switch |
| 1 | **물리 계층 (Physical Layer)** | 전기적 신호를 통해 **비트 단위 전송** | 케이블, 허브, 리피터 |

---

## 데이터 전송 과정

### 송신 측
1. 응용 계층에서 사용자 데이터 생성  
2. 하위 계층으로 내려가며 **캡슐화(Encapsulation)** 수행  
   → 각 계층은 자신의 **헤더(Header)**를 추가함  
3. 물리 계층에서 전기 신호 형태로 전송

### 수신 측
1. 물리 계층에서 신호 수신  
2. 상위 계층으로 올라가며 **역캡슐화(Decapsulation)** 수행  
   → 각 계층은 자신의 헤더를 제거하고 상위 계층에 전달  
3. 응용 계층에서 사용자에게 최종 데이터 표시

---

## 캡슐화와 역캡슐화 예시

| 단계 | 데이터 단위 | 설명 |
|:--|:--|:--|
| 응용/표현/세션 | 데이터 (Data) | 사용자 데이터 |
| 전송 계층 | 세그먼트 (Segment) | TCP/UDP 헤더 추가 |
| 네트워크 계층 | 패킷 (Packet) | IP 헤더 추가 |
| 데이터 링크 계층 | 프레임 (Frame) | MAC 헤더 + 트레일러 추가 |
| 물리 계층 | 비트 (Bit) | 전기 신호로 변환되어 전송 |

---

## 계층별 예시 상황

- **1계층(물리)**: 케이블이 끊어져 신호 전달 불가  
- **2계층(데이터 링크)**: MAC 주소 충돌로 프레임 손실  
- **3계층(네트워크)**: IP 충돌 또는 라우팅 오류  
- **4계층(전송)**: TCP 연결 끊김, 포트 충돌  
- **7계층(응용)**: 웹 서버 다운, DNS 잘못 설정됨

---

# TCP/IP 4계층 모델 (Transmission Control Protocol / Internet Protocol)

## 개요

- **인터넷 통신의 기반이 되는 프로토콜 스택**
- OSI 7계층보다 실제 구현 중심으로 단순화되어 있으며, 총 **4개의 계층**으로 구성되어 있음.
- 인터넷에서 데이터를 주고받는 모든 시스템은 TCP/IP 프로토콜을 기반으로 통신함.

---

## TCP/IP 4계층 구조

| 계층 번호 | 계층 이름 | 주요 기능 | 대표 프로토콜 / 장비 |
|:--:|:--|:--|:--|
| 4 | **응용 계층 (Application Layer)** | 사용자에게 네트워크 서비스를 제공함 | HTTP, FTP, SMTP, DNS, SSH |
| 3 | **전송 계층 (Transport Layer)** | 통신의 신뢰성 보장, 포트 기반 전송 | TCP, UDP |
| 2 | **인터넷 계층 (Internet Layer)** | 패킷의 주소 지정 및 경로 설정 (라우팅) | IP, ICMP, ARP, RARP |
| 1 | **네트워크 접근 계층 (Network Access Layer)** | 실제 물리 매체를 통해 데이터 전송 | Ethernet, Wi-Fi, PPP |

---

## TCP/IP 데이터 전송 과정

1. **응용 계층**  
   사용자가 입력한 데이터를 네트워크 전송 형식으로 변환함.  
   (예: 웹 브라우저 → HTTP 요청 생성)

2. **전송 계층**  
   데이터를 **세그먼트(Segment)** 단위로 나누고 포트 번호를 부여함.  
   TCP는 신뢰성 있는 연결 제공, UDP는 비연결형 전송 제공.

3. **인터넷 계층**  
   데이터를 **패킷(Packet)** 형태로 캡슐화하고, IP 주소를 통해 경로를 지정함.

4. **네트워크 접근 계층**  
   패킷을 **프레임(Frame)** 으로 변환하여 실제 네트워크로 전송함.  
   전기 신호(비트) 형태로 전송됨.

---

## 캡슐화와 역캡슐화

| 단계 | 데이터 단위 | 주요 역할 |
|:--|:--|:--|
| 응용 계층 | 데이터 (Data) | 사용자 데이터 생성 |
| 전송 계층 | 세그먼트 (Segment) | 포트 번호 추가 |
| 인터넷 계층 | 패킷 (Packet) | IP 주소 추가 |
| 네트워크 접근 계층 | 프레임 (Frame) | MAC 주소 추가 및 전송 |

- 송신 측에서는 **캡슐화(Encapsulation)**,  
- 수신 측에서는 **역캡슐화(Decapsulation)** 과정을 거침.

---

## 각 계층별 주요 프로토콜 정리

### 1. 응용 계층
- **HTTP**: 웹 페이지 전송  
- **FTP**: 파일 전송  
- **SMTP/POP3**: 이메일 송수신  
- **DNS**: 도메인 이름 → IP 주소 변환  
- **SSH/Telnet**: 원격 접속

### 2. 전송 계층
- **TCP (Transmission Control Protocol)**  
  - 연결형 프로토콜 (3-way handshake)  
  - 신뢰성, 순서 보장  
  - 흐름 제어, 오류 제어  
- **UDP (User Datagram Protocol)**  
  - 비연결형, 빠른 전송  
  - 신뢰성 낮지만 지연이 적음 (스트리밍, 게임 등에 사용)

### 3. 인터넷 계층
- **IP (Internet Protocol)**: 주소 지정, 라우팅  
- **ICMP**: 오류 및 제어 메시지 전달 (예: ping)  
- **ARP/RARP**: IP ↔ MAC 주소 변환

### 4. 네트워크 접근 계층
- **Ethernet**, **Wi-Fi**, **PPP** 등 실제 물리 전송 담당  
- 프레임 단위로 데이터 전송  
- 오류 검출 및 재전송 기능 포함


---

## TCP 3-way Handshake

TCP는 연결형 프로토콜로, 통신을 시작하기 전에 다음 단계를 거침.

1. **SYN**: 클라이언트 → 서버 (연결 요청)
2. **SYN + ACK**: 서버 → 클라이언트 (응답)
3. **ACK**: 클라이언트 → 서버 (연결 확정)

- 이 과정을 통해 신뢰성 있는 연결이 형성됨.

---

## TCP 4-way Termination (연결 종료 과정)

1. **FIN**: 클라이언트 → 서버 (연결 종료 요청)
2. **ACK**: 서버 → 클라이언트 (요청 수락)
3. **FIN**: 서버 → 클라이언트 (서버 종료 요청)
4. **ACK**: 클라이언트 → 서버 (최종 응답)

---