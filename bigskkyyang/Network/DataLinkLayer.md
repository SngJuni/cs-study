# 데이터링크 계층 (Data Link Layer)

## 개요

- OSI 7계층 중 **2계층**에 해당한다.
- **물리 계층(1계층)** 에서 전송된 비트 스트림을 **프레임(Frame)** 단위로 관리하고, **신뢰성 있는 데이터 전송**을 담당한다.
- 즉, **같은 네트워크 내의 장치 간 통신**을 가능하게 하는 계층임.  
- (예: 같은 LAN 내의 PC, 스위치 간 통신)

---

## 주요 역할

| 역할 | 설명 |
|:--|:--|
| **프레이밍(Framing)** | 네트워크 계층에서 받은 패킷을 프레임 단위로 나눠 전송함 |
| **물리 주소 지정(MAC Address)** | 각 장치의 물리적 주소(MAC)를 이용해 목적지를 구분함 |
| **오류 검출 및 재전송(Error Detection & Recovery)** | 전송 중 발생한 오류를 감지하고 재전송 요청함 |
| **흐름 제어(Flow Control)** | 송수신 속도 차이를 조절해 데이터 손실 방지 |
| **매체 접근 제어(MAC Control)** | 여러 장치가 동일 매체를 사용할 때, 충돌을 방지함 |

---

## 데이터 단위

- 데이터링크 계층의 전송 단위는 **프레임(Frame)**
- 각 프레임은 다음과 같은 구조를 가진다.

| 구성 요소 | 설명 |
|:--|:--|
| **헤더 (Header)** | 송신자/수신자의 MAC 주소, 제어 정보 포함 |
| **데이터 (Payload)** | 실제 상위 계층(네트워크 계층)의 패킷 |
| **트레일러 (Trailer)** | 오류 검출용 **FCS(Frame Check Sequence)** 포함 |

---

## 주요 서브 계층

데이터링크 계층은 두 개의 하위 계층으로 나뉜다.

| 서브 계층 | 이름 | 주요 역할 |
|:--:|:--|:--|
| **LLC** | Logical Link Control | 오류 제어, 흐름 제어, 상위 계층과 인터페이스 |
| **MAC** | Media Access Control | 물리적 주소 지정, 매체 접근 제어 |

### 1. LLC (논리적 링크 제어)
- 네트워크 계층(IP 등)과 직접 연결되는 부분  
- 프레임의 **오류 검출/수정**, **흐름 제어** 담당  
- IEEE 802.2 표준 기반

### 2. MAC (매체 접근 제어)
- 실제 전송 매체(Ethernet, Wi-Fi 등)에 접근하는 부분  
- **MAC 주소**를 통해 통신 대상 식별  
- 매체 접근 방식(CSMA/CD, CSMA/CA 등) 정의  
- IEEE 802.3 (Ethernet), 802.11 (Wi-Fi) 표준 기반

---

## 매체 접근 제어 방식 (MAC Control)

| 방식 | 설명 | 사용 예시 |
|:--|:--|:--|
| **CSMA/CD** | 충돌 발생 후 감지 → 재전송 | 유선 LAN (Ethernet) |
| **CSMA/CA** | 충돌을 사전에 회피 | 무선 LAN (Wi-Fi) |
| **Token Passing** | 토큰을 가진 장치만 전송 가능 | Token Ring 네트워크 |

---

## 주소 지정 방식

- **MAC 주소(Media Access Control Address)**  
  → 네트워크 인터페이스 카드(NIC)에 부여된 **고유한 물리 주소**  
  → 48비트(6바이트)로 구성됨  

| 구성 | 설명 |
|:--|:--|
| **앞 24비트(OUI)** | 제조사 고유 식별자 |
| **뒤 24비트** | 해당 제조사의 장치 고유 번호 |

---

## 오류 제어 (Error Control)

- **FCS (Frame Check Sequence)**: CRC 알고리즘 기반의 오류 검출 필드  
- **ARQ (Automatic Repeat reQuest)**: 오류 발생 시 재전송 요청 방식  
- Stop-and-Wait ARQ  
- Go-Back-N ARQ  
- Selective Repeat ARQ

---

## 스위치와 데이터링크 계층

- **스위치(Switch)**: 대표적인 데이터링크 계층 장비 
- 스위치는 **MAC 주소 테이블(MAC Address Table)** 을 통해 프레임의 목적지를 판단하고 해당 포트로만 전송함.  
- 이를 통해 네트워크 효율성을 높이고 충돌을 줄임.

---

## 주요 프로토콜 및 표준

| 프로토콜 / 표준 | 설명 |
|:--|:--|
| **Ethernet (IEEE 802.3)** | 유선 LAN의 대표 프로토콜 |
| **Wi-Fi (IEEE 802.11)** | 무선 LAN 통신 프로토콜 |
| **PPP (Point-to-Point Protocol)** | 1:1 직렬 통신용 프로토콜 |
| **HDLC (High-Level Data Link Control)** | 점대점 전송용 비트 기반 프로토콜 |

---