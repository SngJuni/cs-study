## 📌 1. 문맥 교환이란?

**문맥 교환(Context Switching)**은 한 프로세스(또는 스레드)가 CPU를 사용하다가 다른 프로세스(또는 스레드)에게 CPU 사용 권한을 넘겨주는 과정이다. 컴퓨터는 여러 작업을 동시에 처리하는 것처럼 보이지만, 사실은 CPU가 아주 빠르게 여러 작업을 번갈아가며 처리하고 있다. 이때 작업이 바뀔 때마다 **기존 작업의 상태를 저장하고, 새 작업의 상태를 불러오는** 과정이 바로 문맥 교환이다.

---

## 📌 2. 문맥 교환의 과정

1.  **실행 중인 프로세스의 문맥 저장**: 현재 CPU를 사용하고 있는 프로세스의 상태(문맥)를 **PCB(프로세스 제어 블록)**에 저장한다. 이때 저장되는 문맥에는 **프로그램 카운터, 레지스터, 스택 포인터** 등의 정보가 포함된다.
2.  **다음 프로세스의 문맥 로드**: 다음에 CPU를 할당받을 프로세스의 PCB에 저장된 문맥을 CPU의 레지스터에 로드한다.
3.  **새로운 프로세스 실행**: 로드된 문맥을 바탕으로 새로운 프로세스가 CPU를 사용하기 시작한다.

---

## 📌 3. 프로세스 문맥 교환 vs 스레드 문맥 교환

### **프로세스 문맥 교환**

프로세스는 각각 독립적인 메모리 공간을 가지고 있다. 따라서 프로세스를 교체할 때는 **새로운 메모리 주소 공간**을 완전히 새로 불러와야 한다. 이 과정은 다음과 같은 이유로 비용이 많이 든다.

* **PCB(프로세스 제어 블록) 저장 및 로드**: 프로세스의 모든 상태를 담고 있는 PCB를 저장하고 로드해야 한다.
* **메모리 주소 공간 전환**: 페이지 테이블과 같은 메모리 관리 관련 정보를 교체해야 한다.

### **스레드 문맥 교환**

스레드는 같은 프로세스 안에서 **코드, 데이터, 힙 영역을 공유**한다. 따라서 스레드를 교체할 때는 **독립적인 스택과 레지스터 정보**만 바꾸면 된다. 이 때문에 스레드 문맥 교환은 프로세스 문맥 교환보다 훨씬 가볍고 빠르다.

| 특징 | 프로세스 문맥 교환 | 스레드 문맥 교환 |
| :--- | :--- | :--- |
| **자원 공유** | 독립적인 메모리 영역을 전환 | 프로세스의 코드, 데이터, 힙을 공유 |
| **전환 대상** | 프로세스 제어 블록(PCB) 전체 | 스레드 제어 블록(TCB) |
| **비용** | 무겁고 비용이 많이 듦 | 가볍고 비용이 적게 듦 |
| **이유** | 독립된 메모리 영역을 전환해야 함 | 공유된 메모리를 그대로 사용함 |

---

## 📌 4. 문맥 교환의 비용과 오버헤드

문맥 교환은 반드시 필요한 과정이지만, 그 자체로 CPU가 아무 작업도 하지 않는 **'오버헤드'**를 발생시킨다. 즉, CPU를 다른 작업으로 전환하는 데 소모되는 시간은 실질적인 작업 처리 시간이 아니라는 뜻. 문맥 교환이 너무 자주 발생하면 시스템 성능이 저하될 수 있으므로, 운영체제는 이 오버헤드를 최소화하기 위해 노력한다.

---
