# IPC & 가상화/보안

## IPC (Inter-Process Communication, 프로세스 간 통신)

### 필요성

- 프로세스는 독립적인 메모리 공간 사용, 다른 프로세스 메모리에 접근 불가
- 협업을 위해 데이터 교환, 동기화가 필요 → IPC 기법 사용

### 역할

- 데이터 전달 : 한 프로세스가 계산한 결과를 다른 프로세스에 전달
- 동기화 (synchronization) : 실행 순서 맞추거나 자원 접근 조정
- 이벤트 알림 : 특정 상황(종료, 에러 발생)을 다른 프로세스에 알려줌

### 주요 IPC 방식

- Pipe (파이프)
    - 한쪽은 write, 한쪽은 read만 가능 → 단방향 통신
    - 부모-자식 프로세스 간 통신에 주로 사용
    - 임시적 → 연결 끊어지면 사라짐
    - 단순, 빠름
    - 양방향 불가, 관계 없는 프로세스는 사용 불가
- FIFO (네임드 파이프)
    - 이름을 가진 파이프
    - 파일처럼 경로 가짐
    - 서로 관계없는 프로세스 간 통신 가능
    - 단방향 통신
- Message Queue (메시지 큐)
    - 커널 공간에 큐를 만들어 메시지 단위로 데이터 주고받음
    - 메시지에는 ID, 길이, 내용 포함
    - 비동기적 통신 가능
    - 커널 관리 오버헤드
- Shared Memory (공유 메모리)
    - 여러 프로세스가 하나의 메모리 영역 공유
    - 커널 거치지 않아 가장 빠름
    - Race Condition(경쟁 조건) 생길 수 있음 → 동기화 필요
    - 보통 세마포어나 뮤텍스와 같이 사용
- Socket (소켓)
    - 네트워크 기반 통신 방식
    - 같은 컴퓨터 안에서 뿐만 아니라 다른 컴퓨터 간 통신에도 사용 가능 (TCP/IP 기반)
    - ex. 웹 브라우저 ↔ 웹 서버, 클라이언트 ↔ 서버 구조
- Signal (시그널)
    - 운영체제가 특정 이벤트를 알리는 신호를 프로세스에 전달
    - ex. `Ctrl+C` → SIGINT 신호 보내 프로세스 종료시킴

## 가상화 (Virtualization)

- 물리적 컴퓨터 자원을 논리적으로 여러 개의 독립된 환경으로 나누는 기술
- 하나의 하드웨어 위에서 여러 개의 OS 동시 실행 가능

### 구성 요소

- Host OS
    - 실제 물리 하드웨어 위의 OS
- Guest OS
    - 가상화된 운영체제 (VM 내부)
- Hypervisor
    - Host와 Guest 사이에서 자원(CPU, 메모리, 디스크 등)을 나눠주는 관리자
    - 종류
        - Type 1 (Bare Metal) : HW 위 직접 실행
        - Type 2 (Hosted) : OS 위에서 실행

### 종류

- 하드웨어 가상화
    - 하나의 HW 위에 여러 OS
    - ex. VMware, KVM
- OS 수준 가상화
    - 커널은 공유, 환경만 분리
    - ex. Docker, LXC
- 애플리케이션 가상화
    - 앱 실행 환경만 분리
    - ex. JVM, Wine

### 장점

- 자원 활용률 향상
- 테스트 환경 구성 용이
- 보안성 강화 (격리)
- 장애 격리 (한 VM이 죽어도 다른 VM 영향 없음)

## 보안

- 컴퓨터 자원(CPU, 메모리, 파일 등)을 허가받지 않은 사용자나 프로그램으로부터 보호

### 보안 목적

- 기밀성 (Confidentiality) : 허가된 사용자만 정보 접근 가능
- 무결성 (Integrity) : 데이터가 임의로 변경되지 않음
- 가용성 (Availability) : 필요한 정보에 언제든 접근 가능

### OS의 보안 메커니즘

- 사용자 모드 / 커널 모드 분리
    - 사용자 프로그램이 임의로 메모리나 하드웨어 조작 못하도록 보호
- 메모리 보호 (Memory Protection)
    - 프로세스 간 데이터 침범, 커널 데이터 조작 등을 방지
    - MMU(Memory Management Unit)과 page table 이용해 프로세스가 접근할 수 있는 주소 공간 제한
        - 각 프로세스는 독립적인 논리 주소 공간 가짐
        - 다른 프로세스의 메모리 주소 접근 시 Trap 발생 → OS가 접근 거부
- 파일 접근 제어 (Access Control)
    - DAC (임의 접근 제어) : 파일 소유자가 권한 직접 설정 ex. UNIX의 rwx 권한
    - MAC (강제 접근 제어) : 시스템이 등급에 따라 접근 통제 ex. 군사, 정부 시스템
    - RBAC (역할 기반 접근 제어) : 사용자의 역할에 따라 권한 부여 ex. 기업 시스템의 직급별 권한
- 인증 (Authentication)
    - 시스템에 접근하려는 사용자의 신원 확인하는 과정
    - 지식 기반(ID, 비밀번호), 소유 기반(OTP, 카드, 토큰), 생체 기반(지문, 얼굴 인식)
- 인가 (Authorization)
    - 인증 통과한 사용자가 무엇을 할 수 있는지 제한
    - 파일 읽기, 프로세스 생성, 네트워크 접근 등 모든 행동에 권한 필요
- 감사(Auditing) & 로깅(Logging)
    - 시스템은 모든 접근 시도 기록(Log)
    - 이후에 누가 언제 무엇을 했는지  추적 가능 → 보안 사고 분석에 중요
- 암호화 (Encryption)
    - 데이터가 유출되더라도 해독할 수 없게 만드는 기술
    - 파일 시스템 암호화 ex. BitLocker, eCryptfs
    - 암호화된 네트워크 통신 ex. SSL/TLS
    - 비밀번호 해시 저장 ex. SHA256, bcrypt 등

### 보안 공격과 방어

| 공격 유형 | 설명 | 방어 방법 |
| --- | --- | --- |
| 악성 코드 (Malware) | 시스템을 파괴/탈취 | 백신, 권한 분리 |
| 버퍼 오버플로우 | 메모리 초과 입력으로 코드 실행 | 스택 보호, ASLR |
| 피싱 / 스푸핑 | 신원 위조 | 인증 강화, 2FA |
| DoS/DDoS | 서비스 불능 공격 | 트래픽 제어, 방화벽 |
| 권한 상승(Privilege Escalation) | 일반 사용자가 root 권한 획득 | 커널 취약점 패치 |