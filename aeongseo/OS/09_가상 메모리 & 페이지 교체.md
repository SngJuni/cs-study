# 가상 메모리 & 페이지 교체

## 가상 메모리 (Virtual Memory)

### 정의

- **가상 메모리**는 실제 물리적 메모리(RAM)보다 큰 메모리 공간을 **가상적으로 제공**하는 기술
- 디스크(HDD/SSD)의 일부를 RAM처럼 사용하는 **스왑 영역(Swap Area)** 을 활용하여, 프로세스가 큰 주소 공간을 사용할 수 있게 함

### 필요성

1. **메모리 부족 문제 해결**
    
    → 실제 RAM보다 큰 프로그램도 실행 가능
    
2. **프로세스 간 독립성 보장**
    
    → 각 프로세스는 자신만의 가상 주소 공간을 갖기 때문에, 다른 프로세스 메모리에 접근 불가
    
3. **메모리 관리 효율화**
    
    → 사용하지 않는 부분은 디스크에 내려두고, 필요한 부분만 메모리에 올림
    

### 동작 방식

- **가상 주소(Virtual Address)** ↔ **물리 주소(Physical Address)** 를 매핑(mapping)하는 과정 필요
- 이 매핑을 담당하는 것이 **MMU (Memory Management Unit)** 와 **페이지 테이블(Page Table)**

## 페이지 교체 (Page Replacement)

### 배경

- 가상 메모리 시스템에서는 메모리 관리 단위를 **페이지(Page)** 라고 함
- 페이지 크기: 보통 4KB, 8KB 등 고정 크기
- 실행 중인 프로그램의 **일부 페이지만** 실제 메모리에 적재됨
- 필요한 페이지가 메모리에 없으면 **페이지 부재(Page Fault)** 발생 → 디스크에서 불러옴
- 그런데, 메모리가 꽉 차 있으면 새로운 페이지를 올리기 위해 기존 페이지를 내보내야 함 = **페이지 교체**

### 페이지 교체 알고리즘

1. **FIFO (First-In First-Out)**
    - 가장 오래전에 올라온 페이지를 교체
    - 단순하지만, 성능이 안좋을 수 있음 (Belady’s Anomaly 발생 가능)
2. **OPT (Optimal, 최적 알고리즘)**
    - 앞으로 가장 오랫동안 사용되지 않을 페이지를 교체
    - 이상적이지만 미래를 알 수 없으므로 실제로는 구현 불가 → 성능 비교 기준으로만 사용
3. **LRU (Least Recently Used)**
    - 가장 오랫동안 사용되지 않은 페이지를 교체
    - 실제 시스템에서 자주 사용됨 (참조 시간 추적 필요)
4. **LFU (Least Frequently Used)**
    - 사용 빈도가 가장 적은 페이지 교체
    - 최근 자주 쓰였지만 앞으로 필요 없을 수도 있어 단점 존재
5. **Clock Algorithm (Second-Chance)**
    - FIFO 변형, 참조 비트를 확인하여 사용 흔적이 없는 페이지 교체
    - 구현 효율성 때문에 많이 사용됨