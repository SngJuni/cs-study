# TCP vs UDP

## 위치

- OSI 7계층 중 4계층 (전송계층)
- 역할
    - 프로세스 간 데이터 전달

## TCP (Transmission Control Protocol)

- 신뢰성 있는 연결 지향형 전송 프로토콜
- 데이터가 반드시 도착해야 하는 서비스에서 사용

### 1) 연결형 (Connection-Oriented)

- 데이터 보내기 전 서버와 연결(세션) 맺음 → 3-way handshake
- 과정
    - 클라이언트 → 서버 : SYN (연결 요청)
    - 서버 → 클라이언트 : SYN + ACK (요청 수락 + 응답)
    - 클라이언트 → 서버 : ACK (응답 확인)

### 2) 신뢰성 보장 (Reliable Transmission)

- 보낸 데이터가 정확히, 순서대로 도착했는지 확인
- 방법
    - ACK (Acknowledgment) : 수신 측이 받은 데이터 확인 응답
    - 재전송 (Retransmission) : ACK이 일정시간 안에 오지 않으면 재전송
    - 시퀀스 번호 (Sequence Number) : 각 데이터에 일련번호 부여, 순서 유지
    - 오류 검사(Error Check) : 체크섬(Checksum)으로 데이터 손상 여부 확인

### 3) 흐름 제어 (Flow Control)

- 수신 측의 윈도우 크기 참고해서 조절

### 4) 혼잡 제어 (Congestion Control)

- 네트워크 전체 붐비면 중간 라우터에서 데이터 버려질 수 있음
- 이를 감지해 전송 속도 스스로 줄였다가 점차 늘림

### 5) 순서 보장 (In-order Delivery)

- 데이터를 스트림(Stream) 형태로 전송
- 받은 데이터가 순서 뒤섞이면 시퀀스 번호 보고 다시 재조립

### 6) 전이중 통신 (Full-duplex Communicatio)

- 송수신 동시 가능
- 내부적으로 송신 버퍼와 수신 버퍼 따로 관리

## UDP (User Datagram Protocol)

- 비연결형, 비신뢰성, 빠른 전송용 프로토콜
- 단순하고 빠른 대신 안전장치 거의 없음

### 1) 비연결형 (Connectionless)

- 상대방에게 미리 연결 요청 X → 그냥 보냄
- 데이터그램(datagram)이라는 독립적인 덩어리 단위로 전송

### 2) 비신뢰성 (Unreliable)

- 보낸 데이터 도착했는지, 순서 맞는지 확인 X

### 3) 순서 보장 없음

- 순서 번호 없어서 받은 순서 그대로 처리
- 여러 패킷 동시에 전송되면 순서 바뀔 수 있음

### 4) 단순하고 빠름

- TCP처럼 헤더 정보 복잡하지 않음
- 연결 수립, 제어 정보 없음 → 지연시간 매우 짧음

### 5) 실시간성 중요할 때 사용

- 약간의 손실 생겨도 괜찮은 실시간 서비스에 사용
- 몇 개 패킷 유실돼도 전체 서비스에는 큰 영향 X