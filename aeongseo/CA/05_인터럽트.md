# 인터럽트(Interrupt)

## 정의
CPU가 프로그램 실행 중 외부나 내부에서 발생한 사건에 반응하기 위해, 현재 실행을 잠시 중단하고 해당 사건을 우선 처리하는 메커니즘

## 필요성
- CPU는 I/O 장치보다 훨씬 빠르게 동작
- CPU가 I/O 완료를 기다리며 계속 확인하면 자원 낭비
- 인터럽트를 이용하면 CPU는 다른 일을 하다가 사건이 발생했을 때만 반응하여 효율적인 동작 가능

## 종류
- **외부 인터럽트 (External / Hardware Interrupt)**
   - CPU 외부 장치가 발생시키는 인터럽트
   - 예: 키보드 입력, 마우스 클릭, 디스크 I/O 완료
   - 하드웨어가 CPU의 **인터럽트 요청선(INT)** 을 통해 신호를 보냄

- **내부 인터럽트 (Internal Interrupt / Exception)**
   - CPU 내부에서 발생
   - 예: 0으로 나누기 오류, 메모리 보호 위반, 잘못된 명령어 실행

- **소프트웨어 인터럽트 (Software Interrupt)**
   - 프로그램이 명령어 실행을 통해 의도적으로 발생시킴
   - 예: `INT` 명령어 (x86 구조)

## 인터럽트 처리 과정
인터럽트가 발생하면 CPU는 다음 순서를 따름
1. 현재 실행 중인 명령어를 완료
2. 프로그램 카운터(PC)와 레지스터 등 CPU 상태를 스택에 저장 (컨텍스트 저장)
3. 인터럽트 벡터 테이블(Interrupt Vector Table, IVT)에서 해당 인터럽트의 시작 주소 확인
4. 해당 주소의 **인터럽트 서비스 루틴(ISR)** 실행
5. ISR 실행 완료 후, 저장된 컨텍스트를 복원하고 원래 프로그램으로 복귀

## 인터럽트 우선순위
- 여러 인터럽트 동시에 발생 가능 → **우선순위(priority)** 필요
- 하드웨어적으로 **우선순위 인코더(priority encoder)**를 사용하거나, **인터럽트 마스크(mask bit)**를 통해 특정 인터럽트 무시 가능
- 예: 긴급 전원 차단 신호 > 타이머 인터럽트 > 키보드 입력

## 명령어 사이클과 인터럽트
CPU는 **매 명령어 사이클의 끝에서** 인터럽트 발생 여부 확인

- Fetch → Decode → Execute → **Interrupt Check**

이 과정을 통해 CPU는 명령어 실행의 원자성을 보장하면서 외부 사건에 반응 가능
