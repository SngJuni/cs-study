# 🧭 라우팅 (Routing)

> **라우팅**은 네트워크 계층(Network Layer)의 핵심 기능 중 하나로,  
> **데이터 패킷을 목적지까지 전달하기 위한 최적 경로를 결정하는 과정**을 의미한다.  
> 이 과정을 수행하는 장비가 바로 **라우터(Router)** 이다.

---

## 🌐 1. 라우팅의 개념

| 항목 | 내용 |
|:--|:--|
| **정의** | 송신지에서 수신지까지 데이터를 전달하기 위해 **최적의 경로(Route)** 를 선택하는 과정 |
| **수행 계층** | OSI 3계층 (Network Layer) |
| **주요 장비** | 라우터(Router), L3 스위치 |
| **핵심 요소** | IP 주소, 라우팅 테이블, 경로 탐색 알고리즘 |
| **단위 데이터** | 패킷(Packet) |

```

송신지 ─── Router A ─── Router B ─── Router C ─── 수신지
↑ 경로 선택 알고리즘을 통해 최적 경로 결정

```

---

## ⚙️ 2. 라우팅의 종류

| 구분 | 설명 | 관리 주체 | 특징 | 예시 |
|:--|:--|:--|:--|:--|
| **정적 라우팅 (Static Routing)** | 관리자가 수동으로 경로를 설정 | 관리자 수동 | 단순, 작은 네트워크에 적합 | 소규모 사설망 |
| **동적 라우팅 (Dynamic Routing)** | 라우터 간에 자동으로 경로 정보를 교환 | 프로토콜 자동 | 대규모 네트워크, 자동 갱신 | RIP, OSPF, BGP |

> 💡 정적 라우팅은 예측 가능한 환경에서 안정적이고,  
> 동적 라우팅은 복잡하고 변화가 잦은 환경에서 효율적이다.

---

## 🧮 3. 라우팅 테이블 (Routing Table)

> 라우터가 목적지 네트워크로 패킷을 보낼 때 참조하는 **경로 정보 목록**

| 필드 | 설명 |
|:--|:--|
| **Destination** | 목적지 네트워크 주소 |
| **Subnet Mask** | 네트워크 구분 비트 |
| **Gateway (Next Hop)** | 다음 경로의 라우터 주소 |
| **Interface** | 패킷이 나가는 라우터 포트 |
| **Metric / Cost** | 해당 경로의 비용 (Hop 수, 지연 등) |

```

예시: 라우팅 테이블
+----------------+----------------+----------------+-----------+
| Destination    | Gateway        | Interface      | Metric    |
+----------------+----------------+----------------+-----------+
| 192.168.1.0/24 | 0.0.0.0        | eth0           | 0         |
| 10.0.0.0/16    | 192.168.1.1    | eth1           | 1         |
| 0.0.0.0/0      | 192.168.1.254  | eth2 (기본게이트웨이) | 10        |
+----------------+----------------+----------------+-----------+

```

---

## 🧭 4. 라우팅 과정 (패킷 전달 흐름)

```

1️⃣ 송신지에서 IP 패킷 생성 (목적지 IP 포함)
2️⃣ 라우터는 라우팅 테이블을 확인하여 다음 홉(Next Hop) 결정
3️⃣ 패킷을 다음 라우터로 전달
4️⃣ 중간 라우터는 TTL 감소 및 헤더 갱신
5️⃣ 목적지 네트워크에 도달 시, 최종 호스트로 전달

```

> ⚠️ 각 라우터는 전체 경로를 아는 것이 아니라,  
> **“다음으로 어디로 보내야 하는가”만 결정**한다.

---

## 🔁 5. 동적 라우팅 프로토콜

### 📍 (1) 거리 벡터 알고리즘 (Distance Vector)

- **각 라우터가 인접 라우터와 거리 정보를 교환**  
- “목적지까지의 거리(hop 수)” 기반으로 최적 경로 결정
- 장점: 단순, 설정 쉬움  
- 단점: 느린 수렴, 루프 가능성 존재  

| 프로토콜 | 특징 |
|:--|:--|
| **RIP (Routing Information Protocol)** | hop count 기준 (최대 15 hop), 주기적 갱신 (30초마다) |
| **IGRP (Interior Gateway Routing Protocol)** | RIP 개선형, 대형 네트워크용 (Cisco 전용) |

---

### 📍 (2) 링크 상태 알고리즘 (Link State)

- **전체 네트워크의 구조를 각 라우터가 인지**  
- 각 링크(경로)의 비용(cost)을 기준으로 최적 경로 계산  
- Dijkstra 알고리즘 기반  
- 빠른 수렴, 대규모 네트워크에 적합

| 프로토콜 | 특징 |
|:--|:--|
| **OSPF (Open Shortest Path First)** | 가장 널리 사용, 영역 기반 구조, 빠른 수렴 |
| **IS-IS (Intermediate System to Intermediate System)** | OSPF와 유사, 대형 ISP 내부망에서 사용 |

---

### 📍 (3) 경로 벡터 알고리즘 (Path Vector)

- **자율 시스템(AS) 간 라우팅**  
- 네트워크 경로를 AS 단위로 관리  
- 루프 방지 및 정책 기반 라우팅 지원  

| 프로토콜 | 특징 |
|:--|:--|
| **BGP (Border Gateway Protocol)** | 인터넷 전체 라우팅 관리 (전 세계 백본) |
| **EGP (Exterior Gateway Protocol)** | BGP 이전 세대, 현재는 사용 X |

---

## 📡 6. 라우팅 알고리즘 비교 요약

| 알고리즘 | 기준 | 대표 프로토콜 | 네트워크 규모 | 장점 | 단점 |
|:--|:--|:--|:--|:--|:--|
| **거리 벡터** | 홉 수 (거리) | RIP, IGRP | 소규모 | 단순 | 느린 수렴, 루프 발생 |
| **링크 상태** | 링크 비용 | OSPF, IS-IS | 중~대규모 | 빠른 수렴 | 계산 복잡, 메모리 소모 |
| **경로 벡터** | AS 경로 | BGP | 인터넷 전체 | 정책 기반, 확장성 | 설정 복잡 |

---

## 🧠 7. 주요 개념 정리

| 개념 | 설명 |
|:--|:--|
| **Hop** | 한 라우터에서 다음 라우터로의 이동 단계 |
| **Next Hop** | 패킷이 다음에 전달될 라우터 주소 |
| **Default Route (0.0.0.0/0)** | 특정 목적지 경로가 없을 때 사용하는 기본 경로 |
| **Metric (Cost)** | 경로 선택의 기준 값 (hop 수, 대역폭, 지연시간 등) |
| **TTL (Time To Live)** | 패킷이 네트워크 내에 존재할 수 있는 최대 홉 수 |

---

## 🔍 8. 라우팅 시각화 예시

```

[PC1] 192.168.0.10
│
▼
[Router1] 192.168.0.1 ── 10.0.0.1 ── [Router2] 10.0.0.2 ── 172.16.0.1
│
▼
[Server] 172.16.0.100

```

> - Router1: “172.16.0.0/16 → 10.0.0.2로 전송”  
> - Router2: “172.16.0.0/16은 직접 연결됨 → Server로 전송”

---

## 🧾 9. IP 패킷 전송 요약

```

Application → Transport → Network → Data Link → Physical
▲
(라우팅)

```

- 네트워크 계층에서 **라우팅 테이블 기반 경로 결정**
- 각 홉에서 **MAC 주소는 매번 변경되지만**, **IP 주소는 동일**

---

## ✅ 10. 핵심 요약

| 항목 | 내용 |
|:--|:--|
| **역할** | IP 패킷의 최적 경로 선택 및 전달 |
| **주요 장비** | 라우터, L3 스위치 |
| **데이터 단위** | 패킷(Packet) |
| **라우팅 종류** | 정적 / 동적 |
| **동적 라우팅 프로토콜** | RIP, OSPF, BGP |
| **핵심 개념** | 라우팅 테이블, Metric, Hop, TTL |
| **알고리즘** | 거리 벡터, 링크 상태, 경로 벡터 |

---

> 🧩 **한줄 요약:**  
> 라우팅은 네트워크 상에서 패킷이 목적지에 도달하기 위한 **가장 효율적인 경로를 선택하는 과정**이며,  
> **RIP–OSPF–BGP**는 각각 내부망·대규모망·인터넷 전역에서 이 기능을 수행한다.

