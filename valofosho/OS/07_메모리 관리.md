# 메모리 관리 (쉽게 이해하기)

## 1. 왜 메모리 관리가 필요할까?

* 컴퓨터에서 프로그램(프로세스)이 실행될 때는 **RAM(주기억장치)** 에 올라가야 함
* 동시에 여러 프로그램이 실행되면, 서로 **메모리를 침범하지 않도록 관리**가 필요
* 운영체제(OS)가 이를 대신 관리해줌 → **메모리 관리자(Memory Manager)**

---

## 2. 주소(Address)의 종류
<img src="./images/메모리관리1.png" alt="메모리관리1" width="500"/><br/>

### (1) 논리 주소 (Logical Address)

* 프로그래머가 보는 주소 (즉, **가상 주소**)
* 예: 프로그램 안에서 `int a[10]` 배열을 만들면, 배열의 시작 주소를 1000번지라고 생각할 수 있음
* 하지만 이건 실제 물리 주소가 아니라 **CPU가 만들어낸 가상의 번호표**

### (2) 물리 주소 (Physical Address)

* 실제 RAM에 저장된 위치
* 예: 아까 `a[10]` 배열이 실제 RAM의 5000번지부터 저장될 수도 있음

👉 **논리 주소(1000) → MMU → 물리 주소(5000)**
MMU(Memory Management Unit)가 중간에서 바꿔줍니다.

---

## 3. 메모리 할당 방식

### (1) 연속 할당

* 프로세스를 하나의 **덩어리**로 메모리에 올림
* 예: “게임 실행 파일 전체”를 RAM에 붙여서 저장
* 문제: 빈 공간이 쪼개져 있으면 큰 프로그램을 못 올릴 수 있음 → **외부 단편화**

### (2) 불연속 할당

* 프로그램을 여러 조각으로 나눠서 흩어져 올려도 됨
* 대표 방식:

  * **페이징(Paging)**

    * 메모리를 조각(프레임)으로 나누고, 프로그램도 똑같은 크기(페이지)로 나눔
    * 예: 책을 여러 페이지로 나누어 책장 아무 칸에나 꽂는 느낌
    * 장점: 빈 공간 잘 활용 가능 (외부 단편화 없음)
    * 단점: 페이지 끝부분이 비면 낭비 (내부 단편화)

  * **세그멘테이션(Segmentation)**

    * 프로그램을 **논리적인 단위(코드, 데이터, 스택 등)** 로 나눠서 관리
    * 예: 책을 “소설 / 그림 / 참고자료” 챕터별로 나누어 보관하는 느낌
    * 장점: 구조적으로 관리 가능
    * 단점: 외부 단편화 여전히 발생

---

## 4. 가상 메모리 (Virtual Memory)
<img src="./images/메모리관리2.png" alt="메모리관리2" width="500"/><br/>
* “실제 메모리보다 큰 메모리를 쓰는 것처럼 보이게 하는 기술”
* 필요할 때만 일부를 RAM에 올리고, 나머지는 **하드디스크(보조기억장치)**에 둠
* 예: 카페에서 노트북 메모장이 너무 많으면, 잠시 옆 테이블(디스크)에 빼두었다가 필요할 때 가져오는 것

### 중요 개념

* **페이지 부재(Page Fault)** : 필요한 데이터가 RAM에 없을 때 디스크에서 가져옴
* **페이지 교체 알고리즘** : 공간이 부족할 때 어떤 페이지를 내보낼지 결정

  * FIFO : 가장 먼저 들어온 것부터 내보냄
  * LRU : 가장 오래 사용하지 않은 것 내보냄
  * Optimal : 앞으로 가장 오래 안 쓸 것 내보냄 (이론적으로만 가능)

---

## 5. 단편화 (Fragmentation)

* 메모리 공간이 쪼개져서 낭비되는 현상

### (1) 내부 단편화

* 할당된 블록 내부에서 낭비
* 예: 100KB 공간에 95KB 프로그램 → 5KB는 못 씀

### (2) 외부 단편화

* 전체적으로 빈 공간은 충분하지만, 작은 조각으로 흩어져 있어서 큰 프로그램을 못 넣는 경우
* 예: 방이 여러 개 비어 있지만, 큰 짐을 넣을 수 있는 넓은 방이 없음

---

## 6. 한눈에 보는 핵심 요약

* **논리 주소 ↔ 물리 주소 변환** : MMU가 담당
* **연속 할당** : 단순하지만 단편화 문제
* **페이징** : 외부 단편화 해결, 내부 단편화 가능
* **세그멘테이션** : 논리적 단위 관리, 외부 단편화 존재
* **가상 메모리** : 실제보다 큰 공간처럼 보이게, 페이지 교체 필요

