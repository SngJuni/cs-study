# 🧩 IPC & 가상화 / 보안 (Inter-Process Communication & Virtualization / Security)

운영체제에서 프로세스 간 데이터 교환과 자원 공유를 담당하는 **IPC(Inter-Process Communication)**,
시스템 자원의 효율적 사용과 격리를 위한 **가상화(Virtualization)**,
그리고 안전한 자원 접근을 보장하는 **보안(Security)** 체계를 다루는 영역.


## 🧩 1. IPC (Inter-Process Communication)

### 🔹 개념

* **프로세스 간 데이터 교환을 위한 운영체제 메커니즘**
* 각 프로세스는 독립된 메모리 공간을 가지므로 직접 접근 불가
  → **운영체제 커널**이 중개 역할을 수행한다.
* 병렬 처리, 모듈 간 협업, 서버 구조 설계에서 필수적인 기능.

---

### 🔹 2. IPC의 필요성

| 이유         | 설명               | 예시             |
| ---------- | ---------------- | -------------- |
| **데이터 교환** | 프로세스 간 정보 전달     | 웹 서버 ↔ 워커 프로세스 |
| **자원 공유**  | 공통 데이터 접근        | DB 연결 풀, 캐시    |
| **동기화**    | 실행 순서 제어 및 충돌 방지 | 세마포어, 모니터      |
| **모듈화**    | 독립 기능 간 협력       | 마이크로서비스 구조     |

---

### 🔹 3. IPC 주요 방식

| 방식                         | 통신 방향 | 속도 | 범위    | 특징          |
| -------------------------- | ----- | -- | ----- | ----------- |
| **파이프 (Pipe)**             | 단방향   | 중간 | 로컬    | 부모-자식 간 통신  |
| **네임드 파이프 (FIFO)**         | 양방향   | 중간 | 로컬/원격 | 이름 기반 통신    |
| **메시지 큐 (Message Queue)**  | 양방향   | 중간 | 로컬    | 큐 기반 비동기 통신 |
| **공유 메모리 (Shared Memory)** | 양방향   | 빠름 | 로컬    | 메모리 직접 공유   |
| **세마포어 (Semaphore)**       | 제어용   | -  | 로컬    | 자원 접근 제어    |
| **소켓 (Socket)**            | 양방향   | 느림 | 로컬/원격 | 네트워크 기반 통신  |

---

## 🔸 4. 공유 메모리 (Shared Memory)

### 🔹 개념

* 여러 프로세스가 동일한 메모리 영역을 **공유하여 직접 접근**
* **커널을 거치지 않기 때문에 가장 빠름**
* 단, 동시에 접근하면 충돌 발생 → **세마포어로 동기화 필요**

```
[Process A] ─┐
              │  공유 영역
              ├──▶ [Shared Memory]
              │
[Process B] ─┘
```

💡 **비유:**

> 🍱 공용 냉장고 — 여러 사람이 같은 냉장고(메모리)에 음식을 넣고 꺼냄.
> 빠르지만, 동시에 열면 충돌이 일어나므로 "순서(동기화)"가 필요함.

| 장점             | 단점     |
| -------------- | ------ |
| 데이터 복사 없음 (빠름) | 동기화 필수 |
| 대용량 데이터 교환에 적합 | 구현 복잡  |

📘 **활용 예시:**

* 영상 프레임 공유
* 실시간 데이터 파이프라인
* AI 모델 Serving에서 파라미터 공유

---

## 🔸 5. 소켓 (Socket)

### 🔹 개념

* 네트워크 인터페이스(TCP, UDP, HTTP 등)를 기반으로 하는 IPC
* 본래는 **컴퓨터 간 통신용**이지만, 로컬 IPC에도 사용 가능
* **서버-클라이언트 구조**로 동작

```
[Client] ⇄ [Server]
   ↓           ↑
 socket()  bind()/listen()/accept()
```

💡 **비유:**

> 📞 전화기 — 한쪽은 전화를 걸고(connect),
> 다른 쪽은 받는다(accept).
> 연결이 성립되면 데이터를 주고받는 대화가 시작된다.

| 구분              | 특징          | 예시          |
| --------------- | ----------- | ----------- |
| **TCP Socket**  | 연결형, 신뢰성 보장 | HTTP, 채팅 서버 |
| **UDP Socket**  | 비연결형, 빠른 속도 | 스트리밍, 게임    |
| **UNIX Socket** | 로컬 전용       | DB ↔ 클라이언트  |

---

## 🔸 6. 파이프 (Pipe)

### 🔹 개념

* **단방향 FIFO 통신 채널**
* 부모-자식 간 데이터 전달용 (로컬 전용)

```
[Writer] → (Pipe Buffer) → [Reader]
```

💡 **비유:**

> 🚰 한쪽으로만 흐르는 수도관 — 한 방향으로만 데이터가 이동.
> 양방향 통신이 필요하면 두 개의 파이프를 만들어야 함.

| 구분                | 설명            | 특징           |
| ----------------- | ------------- | ------------ |
| **익명 파이프**        | 부모-자식 간 한정    | 단방향          |
| **네임드 파이프(FIFO)** | 이름 기반으로 식별 가능 | 독립 프로세스 간 가능 |

📘 **터미널 예시:**

```bash
$ ls | grep ".py"
```

→ `ls`의 출력이 파이프를 통해 `grep` 명령의 입력으로 전달된다.

---

## 🔸 7. 메시지 큐 (Message Queue)

### 🔹 개념

* 메시지를 큐(FIFO) 형태로 저장하는 **커널 버퍼**를 이용
* 송신자는 메시지를 “넣고”, 수신자는 나중에 “꺼내서” 처리
* **비동기적 통신** 가능 (동시에 실행되지 않아도 됨)

```
[Sender] → (Message Queue) → [Receiver]
```

💡 **비유:**

> 🏦 은행 대기표 시스템 — 고객이 대기표를 뽑으면 직원이 순서대로 불러 처리.
> 고객(송신자)과 직원(수신자)이 동시에 있어야 할 필요가 없다.

| 장점        | 설명                  |
| --------- | ------------------- |
| **비동기성**  | 송신자·수신자 동시 실행 불필요   |
| **결합도 ↓** | 두 프로세스 독립 가능        |
| **보장성**   | 큐에 들어간 메시지는 반드시 처리됨 |

📘 **활용 예시:**

* 이메일 인증 전송
* 로그 처리 서버
* RabbitMQ, Kafka, AWS SQS

---

## 🔸 8. 세마포어 (Semaphore)

### 🔹 개념

* 공유 자원 접근을 제어하는 **동기화 도구**
* **정수형 변수(counter)**로 접근 가능한 프로세스 수를 관리
* `P(wait)` / `V(signal)` 연산으로 제어

💡 **비유:**

> 🚦 신호등 — 자원을 사용할 수 있는 차량(프로세스) 수를 제어.
> 빨간불일 때는 대기, 초록불이면 통과 가능.

📘 **활용 예시:**

* 생산자-소비자 문제
* 공유 메모리 접근 순서 제어
* DB Connection Pool 관리

---

## 🔸 9. IPC 비교 요약

| 방식          | 통신 방향 | 속도    | 동기화 필요 | 범위    | 대표 예시         |       |
| ----------- | ----- | ----- | ------ | ----- | ------------- | ----- |
| **파이프**     | 단방향   | 중간    | X      | 로컬    | `ls           | grep` |
| **네임드 파이프** | 양방향   | 중간    | X      | 로컬·원격 | `/tmp/myfifo` |       |
| **메시지 큐**   | 양방향   | 중간    | X      | 로컬    | RabbitMQ      |       |
| **공유 메모리**  | 양방향   | 가장 빠름 | O      | 로컬    | 영상 처리         |       |
| **세마포어**    | 제어용   | -     | -      | 로컬    | 동기화           |       |
| **소켓**      | 양방향   | 느림    | X      | 로컬·원격 | TCP/IP, HTTP  |       |

---

## 🧱 10. 가상화 (Virtualization)

### 🔹 개념

* 물리적 하드웨어 자원을 논리적으로 분리하여
  여러 운영체제가 **독립적으로 실행되도록 하는 기술**

```
[Hardware]
   ↓
[Hypervisor]
   ↓
[VM1]  [VM2]  [VM3]
```

💡 **비유:**

> 🏢 한 건물에 여러 세입자(운영체제)가 입주.
> 건물주(하이퍼바이저)가 CPU, 메모리 등의 자원을 공정하게 분배.

| 목적         | 설명                   |
| ---------- | -------------------- |
| **자원 효율성** | CPU, 메모리, 저장소 활용 극대화 |
| **격리성**    | 각 VM이 독립적으로 실행       |
| **이식성**    | 환경에 상관없이 동일한 동작      |
| **보안성**    | VM 간 침입 차단, 격리 보장    |

---

### 🔹 개념 및 종류

| 종류             | 설명               | 예시          |
| -------------- | ---------------- | ----------- |
| **하드웨어 가상화**   | CPU·메모리·I/O를 가상화 | VMware, KVM |
| **OS 수준 가상화**  | 커널 공유, 컨테이너 기반   | Docker, LXC |
| **애플리케이션 가상화** | 앱 단위 실행 환경       | JVM, Wine   |

---

### 🔹 하이퍼바이저 (Hypervisor)

| 종류                      | 설명           | 예시                    |
| ----------------------- | ------------ | --------------------- |
| **Type 1 (Bare Metal)** | 하드웨어 위 직접 실행 | VMware ESXi, Hyper-V  |
| **Type 2 (Hosted)**     | OS 위에서 실행    | VirtualBox, Parallels |

---

### 🔹 가상화와 보안의 관계

| 관점                      | 역할                     | 예시                       |
| ----------------------- | ---------------------- | ------------------------ |
| **격리성 (Isolation)**     | 한 VM의 오류가 다른 VM에 영향 없음 | 클라우드 서버                  |
| **샌드박싱 (Sandboxing)**   | 제한된 실행 환경 제공           | 브라우저 탭, 모바일 앱            |
| **취약점 완화 (Mitigation)** | 메모리 접근 제한              | ASLR, KASLR              |
| **가상 보안 모니터 (VSM)**     | 하이퍼바이저 수준 보호           | Windows Credential Guard |

---

## 🔐 11. OS 보안 (Security)

### 🔹 핵심 개념

운영체제는 사용자와 시스템 자원을 보호하기 위해 **4대 보안 기둥**을 갖는다.

| 영역                      | 설명         | 예시             |
| ----------------------- | ---------- | -------------- |
| **인증 (Authentication)** | 신원 확인      | ID/PW, OTP     |
| **인가 (Authorization)**  | 접근 권한 제어   | ACL, RBAC      |
| **암호화 (Encryption)**    | 데이터 보호     | AES, RSA, TLS  |
| **감사 (Auditing)**       | 로그 기록 및 추적 | syslog, auditd |

---

### 🔹 보호 도메인 (Protection Domain)

* 프로세스마다 접근 가능한 자원을 구분
* OS는 **사용자 모드(User)** / **커널 모드(Kernel)**로 권한을 나눠 보호

💡 **예시:**
사용자는 파일 실행 가능하지만, 커널 수정은 불가능하다.

---

## 🧨 주요 보안 공격 유형 & 대응 (강화판)

| 공격 유형                  | 원리                    | 대응 기법                              |
| ---------------------- | --------------------- | ---------------------------------- |
| **버퍼 오버플로우**           | 입력 크기 초과 → 인접 메모리 덮어씀 | ASLR, Stack Canary, DEP/NX-bit     |
| **권한 상승**              | 커널 취약점 이용해 root 권한 획득 | 최소 권한 원칙, SELinux, 보안 패치           |
| **서비스 거부 (DoS/DDoS)**  | 과도한 요청으로 시스템 자원 고갈    | Rate Limiting, Load Balancing, IPS |
| **코드 인젝션 (SQL/Shell)** | 입력값에 코드 삽입            | 입력 검증, Prepared Statement, WAF     |
| **스니핑 (Sniffing)**     | 패킷 도청                 | TLS/SSL, VPN, ARP 방어               |
| **피싱 (Phishing)**      | 위조 페이지로 정보 유출         | HTTPS 인증, 2FA                      |
| **랜섬웨어**               | 파일 암호화 후 금전 요구        | 백업, 실시간 탐지, 실행 제한                  |
| **XSS (크로스사이트 스크립팅)**  | 웹 페이지 내 악성 스크립트 실행    | Output Encoding, CSP, HttpOnly 쿠키  |
| **CSRF (요청 위조)**       | 사용자의 세션을 이용해 위조 요청    | CSRF Token, Referer 검증             |

---

### 💡 보안 설계 원칙 (Security by Design)

| 원칙                     | 설명                 |
| ---------------------- | ------------------ |
| **최소 권한 원칙**           | 필요한 권한만 부여         |
| **Fail-Safe Defaults** | 명시적 허용만 접근 가능      |
| **Complete Mediation** | 모든 접근 시 권한 재검사     |
| **Defense in Depth**   | 다층 방어 (암호화 + 방화벽)  |
| **Open Design**        | 보안은 알고리즘이 아닌 키에 의존 |

---
