# 🔄 IPC & 가상화 / 보안 (Inter-Process Communication & Virtualization / Security)

운영체제에서 프로세스 간 데이터 교환과 자원 공유를 담당하는 **IPC(Inter-Process Communication)**,  
그리고 시스템 자원의 효율적 사용과 격리를 위한 **가상화(Virtualization)**,  
안전한 자원 접근을 보장하는 **보안(Security)** 체계를 다루는 영역.

---

## 1. IPC (Inter-Process Communication)

### 🔹 개념
- 프로세스 간에 **데이터, 명령, 신호를 주고받는 메커니즘**
- 프로세스의 **독립성 유지**와 **협업 동작**을 동시에 보장
- 운영체제가 **커널 버퍼**를 통해 통신 중개

---

## 2. IPC의 필요성

| 이유 | 설명 | 예시 |
|------|------|------|
| **데이터 교환** | 병렬 프로세스 간 데이터 전달 | 웹 서버 ↔ 워커 프로세스 |
| **자원 공유** | 메모리, 파일 등 공유 자원 접근 | DB 연결 풀, 공유 메모리 |
| **동기화** | 실행 순서 제어 및 경합 방지 | 세마포어, 모니터 |
| **모듈화** | 독립적인 기능 단위 간 협력 | 마이크로서비스 구조 |

---

## 3. IPC의 주요 방식

| 방식 | 설명 | 예시 |
|------|------|------|
| **파이프 (Pipe)** | 단방향 통신, 부모-자식 간 연결 | `ls | grep "txt"` |
| **네임드 파이프 (FIFO)** | 이름 기반 양방향 통신 | `/tmp/myfifo` |
| **메시지 큐 (Message Queue)** | 메시지 단위 송수신 | POSIX MQ, RabbitMQ |
| **공유 메모리 (Shared Memory)** | 메모리 영역 공유, 빠른 속도 | 데이터 처리 파이프라인 |
| **세마포어 (Semaphore)** | 동시 접근 제어 | 임계 구역 보호 |
| **소켓 (Socket)** | 네트워크 기반 프로세스 간 통신 | TCP/IP, HTTP 서버 |

---

## 4. 파이프 (Pipe)

### 🔹 특징
- 단방향, 부모-자식 프로세스 간 통신  
- 운영체제가 **버퍼 역할**

```

[Producer] → (Pipe Buffer) → [Consumer]

````

### 🔹 예시
```bash
$ ls | grep ".py"
````

→ `ls`의 출력을 파이프를 통해 `grep` 입력으로 전달

---

## 5. 메시지 큐 (Message Queue)

### 🔹 특징

* 커널 공간에 **메시지 형태의 버퍼 저장소** 존재
* 송신자와 수신자가 비동기적으로 데이터 교환

```
[Process A] → (Message Queue) → [Process B]
```

### 🔹 장점

* 동기화 불필요 (비동기 통신)
* 메시지 식별 가능 (ID 기반)

### 🔹 예시 (POSIX)

```c
msgsnd(msqid, &msg, sizeof(msg), 0);
msgrcv(msqid, &msg, sizeof(msg), 0, 0);
```

---

## 6. 공유 메모리 (Shared Memory)

### 🔹 특징

* 여러 프로세스가 동일한 **메모리 영역**을 직접 참조
* 가장 빠른 IPC 방식 (커널 개입 최소화)

```
┌──────────────┐
│ Shared Memory│  ←  [Process A, Process B]
└──────────────┘
```

### 🔹 단점

* 동기화 필요 (세마포어, 뮤텍스 사용)

---

## 7. 소켓 (Socket)

### 🔹 특징

* **프로세스 간 네트워크 통신 인터페이스**
* 로컬(Linux IPC Socket) 또는 원격(TCP/IP) 통신 가능

### 🔹 예시

| 종류                        | 설명            | 포트 예시                |
| ------------------------- | ------------- | -------------------- |
| **Stream Socket (TCP)**   | 신뢰성 보장, 연결형   | HTTP(80), HTTPS(443) |
| **Datagram Socket (UDP)** | 비연결형, 빠른 속도   | DNS(53), RTP         |
| **UNIX Domain Socket**    | 같은 호스트 내부 IPC | `/tmp/.X11-unix`     |

---

## 8. 동기화 메커니즘

| 방식                   | 설명             | 예시                |
| -------------------- | -------------- | ----------------- |
| **세마포어 (Semaphore)** | 정수 카운터 기반 동기화  | PV 연산             |
| **뮤텍스 (Mutex)**      | 단일 스레드 진입 보장   | pthread_mutex     |
| **모니터 (Monitor)**    | 조건 변수 + 뮤텍스 결합 | Java synchronized |

---

## 9. 가상화 (Virtualization)

### 🔹 개념

* 물리적 하드웨어 자원을 논리적으로 분리하여
  **여러 운영체제 또는 프로세스가 독립적으로 실행되도록 하는 기술**

```
[Hardware]
   ↓
[Hypervisor]
   ↓
[VM1]  [VM2]  [VM3]
```

### 🔹 목적

| 목적                   | 설명                   |
| -------------------- | -------------------- |
| **자원 효율성**           | CPU, 메모리, 저장소 활용 최적화 |
| **격리성(Isolation)**   | 각 VM 간 독립적 실행 보장     |
| **이식성(Portability)** | 환경에 관계없이 동일 실행       |
| **보안성(Security)**    | 격리된 실행 공간 제공         |

---

## 10. 가상화의 종류

| 종류             | 설명                   | 예시          |
| -------------- | -------------------- | ----------- |
| **하드웨어 가상화**   | CPU, 메모리, I/O 전체 가상화 | VMware, KVM |
| **OS 수준 가상화**  | 커널 공유, 격리된 컨테이너 실행   | Docker, LXC |
| **애플리케이션 가상화** | 개별 앱 단위 실행 환경 제공     | Wine, JVM   |

---

## 11. 하이퍼바이저 (Hypervisor)

| 종류                      | 설명           | 예시                    |
| ----------------------- | ------------ | --------------------- |
| **Type 1 (Bare-metal)** | 하드웨어 위 직접 실행 | VMware ESXi, Hyper-V  |
| **Type 2 (Hosted)**     | OS 위에서 동작    | VirtualBox, Parallels |

---

## 12. 가상화와 보안의 관계

| 관점                     | 역할                    | 예시                       |
| ---------------------- | --------------------- | ------------------------ |
| **격리성(Isolation)**     | 한 VM의 오류가 다른 VM에 영향 X | 클라우드 서버 환경               |
| **샌드박싱(Sandboxing)**   | 코드 실행 제한 영역 제공        | 브라우저 탭, 안드로이드 앱          |
| **취약점 완화(Mitigation)** | 메모리, 커널 접근 제한         | KASLR, ASLR              |
| **가상 보안 모니터(VSM)**     | 하이퍼바이저 수준 보안 관리       | Windows Credential Guard |

---

## 13. OS 보안 메커니즘

| 영역                            | 설명              | 예시                     |
| ----------------------------- | --------------- | ---------------------- |
| **인증(Authentication)**        | 사용자 신원 확인       | ID, Password, 2FA      |
| **인가(Authorization)**         | 권한 부여 및 제어      | ACL, Role-based Access |
| **암호화(Encryption)**           | 데이터 보호          | AES, RSA, TLS          |
| **감사(Auditing)**              | 로그 기록 및 분석      | syslog, auditd         |
| **보호 도메인(Protection Domain)** | 프로세스 간 자원 접근 제한 | 사용자 모드 / 커널 모드         |

---

## 14. 보안 공격 유형

| 공격 유형                           | 설명               | 대응 기법              |
| ------------------------------- | ---------------- | ------------------ |
| **버퍼 오버플로우**                    | 입력 범위 초과로 메모리 침범 | ASLR, Stack Canary |
| **권한 상승(Privilege Escalation)** | 루트 권한 탈취         | 커널 업데이트, 최소 권한 원칙  |
| **서비스 거부(DDoS)**                | 대량 요청으로 자원 고갈    | Rate Limiting      |
| **코드 인젝션**                      | 악성 코드 삽입         | Input Sanitization |
| **스니핑(Sniffing)**               | 네트워크 트래픽 도청      | TLS 암호화            |

---

## 15. 면접 핵심 질문 예시

| 질문                 | 핵심 포인트                 |
| ------------------ | ---------------------- |
| IPC의 목적            | 프로세스 간 데이터 교환 및 동기화    |
| 공유 메모리 vs 메시지 큐 차이 | 속도 vs 안정성              |
| 세마포어와 뮤텍스 차이       | 다중 접근 vs 단일 접근         |
| 가상화의 장점            | 자원 효율성, 격리성, 이식성       |
| 하이퍼바이저의 역할         | VM 생성 및 관리             |
| OS 수준 가상화 예시       | Docker, Kubernetes Pod |
| 샌드박스의 목적           | 실행 격리 및 보안 강화          |
| 인증과 인가의 차이         | 신원 확인 vs 권한 제어         |
