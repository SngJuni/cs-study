# NAT, VPN, 방화벽

### NAT (Network Address Translation)

---

**정의**

- 사설망(Private Network)과 공인망(Public Network) 사이에서 **IP 주소를 변환하여 통신이 가능하게 하는 기술**이다.
- IPv4 주소 부족 문제를 해결하기 위한 대표적인 방식

**동작 원리**

- 내부 네트워크(ex. 192.168.x.x)에서는 사설 IP를 사용하지만, 인터넷으로 나갈 때 NAT 장비(보통 라우터)가 공인 IP로 변환한다.
- 응답 패킷이 돌아올 때는 NAT 테이블을 참조해 공인 IP → 사설 IP로 다시 매핑(reverse mapping)한다.

**종류**

1. **Static NAT(정적 NAT)**
    - 하나의 사설 IP ↔ 하나의 공인 IP를 고정적으로 매핑
    - 서버 고정 접속에 적합 (ex. 내부 웹 서버)
2. **Dynamic NAT(동적 NAT)**
    - 내부 사설 IP를 공인 IP 풀(pool) 중 하나로 임시 매핑
    - 사용 종료 시 해제
3. **PAT(Port Address Translation, 포트 기반 NAT)**
    - 하나의 공인 IP를 여러 사설 IP가 포트 번호로 구분하여 공유
    - 일반 가정용 라우터에서 사용하는 방식 (NAT Overload)

**특징**

- 내부 IP를 숨겨 보안성 향상
- 공인 IP 절약 가능
- 단, 외부에서 내부로의 직접 연결(서버 운영 등)은 어렵고, 포트포워딩(Port Forwarding) 설정이 필요함.

### VPN (Virtual Private Network)

---

**정의**

- 공용 네트워크(인터넷)을 이용하지만, **암호화된 터널을 통해 안전하게 내부망처럼 연결**하는 기술
- 외부에서 회사 내부망에 접속하거나, 원격 근무 환경에서 자주 사용된다.

**동작 원리**

- 사용자의 데이터를 암호화해 공용망 위에 **가상의 사설 통신 경로(터널)** 를 생성한다.
- VPN 서버가 중계 역할을 하며, 사용자와 목적지 사이의 패킷을 보호한다.

**주요 방식**

1. **PPTP (Point-to-Point Tunneling Protocol)**
    - 초기 VPN 표준, 속도는 빠르지만 보안이 약함
2. **L2TP/IPsec**
    - L2TP로 터널링, IPsec으로 암호화 (보안 강화)
3. **SSL VPN**
    - 웹 브라우저 기반, HTTPS 암호화 이용
    - 별도 클라이언트 설치 없이 간편하게 접속 가능
4. **Site-to-Site VPN**
    - 두 네트워크(지사 간 등)를 영구적으로 연결

**특징**

- 데이터 암호화로 기밀성 보장
- IP 스푸핑이나 도청 방지
- NAT, 방화벽 뒤에서도 안전한 통신 가능

### 방화벽 (Firewall)

---

**정의**

- 내부 네트워크와 외부 네트워크 사이의 **보안 경계 역할**을 하는 시스템.
- 허용된 트래픽만 통과시키고, 비인가 접근은 차단한다.

**동작 방식**

1. **패킷 필터링 (Packet Filtering)**
    - IP, 포트, 프로토콜 정보를 기준으로 통과 여부 판단
    - OSI 3~4계층 수준 제어
    - 예: “80번 포트(HTTP)만 허용”
2. **상태 기반 검사 (Stateful Inspection)**
    - 연결 상태를 추적해 합법적인 세션인지 검사
    - 단순한 포트 기반보다 보안 수준 높음
3. **프록시 게이트웨이 (Proxy Firewall)**
    - 사용자의 요청을 대신 처리하는 중계 서버 역할
    - 내부 IP를 외부에 직접 노출하지 않음
4. **차세대 방화벽 (NGFW, Next-Generation Firewall)**
    - 애플리케이션 레벨 제어, 딥패킷 검사(DPI), 침입 탐지/방지 기능 통합

---

**방화벽의 정책 방향**

- **Inbound 정책**: 외부에서 내부로 들어오는 트래픽 제어
- **Outbound 정책**: 내부에서 외부로 나가는 트래픽 제어

## 관련 면접 질문

- NAT의 역할은 무엇이며 왜 필요한가?
    - NAT는 내부 사설망과 공인망 간의 주소를 변환하여 통신을 가능하게 하고, IPv4 주소 부족을 해결한다. 또한 내부망을 숨겨 보안성을 높인다.
- Q2. VPN이 안전한 이유는 무엇인가?
    - 데이터를 암호화하고, 캡슐화된 터널을 통해 전송하기 때문에 공용 네트워크에서도 데이터가 외부에 노출되지 않는다.
- Q3. 방화벽의 주요 기능은 무엇인가?
    - 내부·외부 트래픽을 감시하고 비인가 접근을 차단한다. Stateful Inspection을 통해 연결 상태를 검증하며, 필요 시 애플리케이션 단 제어까지 수행한다.
- Q4. NAT와 방화벽의 차이는 무엇인가?
    - NAT는 주소 변환과 내부망 보호 중심, 방화벽은 접근 제어와 공격 차단 중심이다. 실제 네트워크에서는 두 기능이 라우터나 게이트웨이에 함께 탑재된다.