# 명령어 사이클 & 파이프라이닝

## 명령어 사이클(Instruction Cycle)

CPU가 프로그램을 실행할 때 하나의 명령어를 처리하는 과정

### 명령어 사이클 단계
1. 인출 단계(Fetch Cycle)
    - 프로그램 카운터 (PC)가 가리키는 메모리 주소에서 명령어를 읽어옴
    - 명령어 레지스터에(IR)에 주소 저장
    - PC는 다음 명령어를 가리키도록 자동 증가

2. 해독 단계(Decode Cycle)
    - 명령어를 해석하여 어떤 연산을 수행할지 결정
    - 필요한 레지스터, 주소 모드, 연산 종류 등을 해석

3. 실행 단계(Execute Cycle)
    - 해석된 명령어에 따라 실제 연산 수행
        - ALU(산술 / 논리 연산)
        - 메모리 접근
        - 분기 / 제어 명령 등

4. 저장 단계(Store Cycle, 선택적 수행)
     - 실행 결과를 레지스터나 메모리에 저장

이 과정을 반복하며 프로그램 수행

## 파이프라이닝(Pipelining)

명령어 사이클을 겹쳐서 실행하여 CPU 성능을 높이는 기법

### 파이프라이닝 기본 아이디어
- 명령어 사이클 단계를 생산 라인처럼 병렬 처리하는 것
- 예시
    - 명령어 1은 실행 단계
    - 명령어 2는 해독 단계
    - 명령어 3은 인출 단계에서 동시에 진행 가능

### 👍장점
- CPU 자원을 최대한 활용하여 처리량 증가
- 클럭 주기마다 명령어 하나가 완성되는 구조(ideal case)

### 👎단점
- 구조적 위험(structural Hazard) : 하드웨어 자원 충돌(ex. ALU를 동시에 쓰려고 하는 경우 충돌)
- 데이터 위험(Data Hazard) : 앞선 명령어 결과를 아직 얻지 못했는데 다음 명령어가 그 결과를 필요로 할 경우
- 제어 위험(Contral Hazard) : 분기(branch) 명령어로 인해 다음 명형어가 불확실해지는 경우

단점 해결을 위해 버블(대기 사이클 삽입), 분기 예측, 데이터 포워딩 등의 기술 사용

## 명령어 사이클과 파이프라이닝 관계

파이프라이닝은 명령어 사이클을 효율적으로 활용하는 방법이다.